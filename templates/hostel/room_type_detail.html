{% extends 'partials/base.html' %}
{% load static %}

{% block content %}
<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Other head elements -->
</head>

<div id="titlebar" class="gradient">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2>{{ room_type.type }}</h2>
                <nav id="breadcrums">
                    <ul>
                        <li><p>{{ rooms.count }} Available Rooms</p></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <!-- Room Availability Section -->
    <section class="room-availability">
        <h3>Available Rooms</h3>
        <p><strong>All available rooms have 1 available room</strong></p>
        
        <!-- Room List -->
        <div class="room-list">

            {% for r in rooms %}
            <div class="room-item">
                <p><strong>Room No:</strong> {{ r.room_number }}</p>
                <span class="value">{{ r.room_type.price }}<span>/Per Day</span></span>
                <p><strong>Capacity:</strong> {{ r.capacity }} person</p>
        
                <input type="hidden" class="room_id_{{ r.id }}" value="{{ r.id }}" id="room_id">
                <input type="hidden" class="room_number_{{ r.id }}" value="{{ r.room_number }}" id="room_number">
        
                <button class="button border add-to-selection" data-index="{{ r.id }}">
                    <i class="fas fa-shopping-cart"></i> Add to Selection
                </button>
            </div>
            {% empty %}
            <p>No rooms available.</p>
            {% endfor %}
        </div>
        

        <!-- Hidden fields for booking -->
        <input type="hidden" value="{{ hostel.id }}" id="id">
        <input type="hidden" value="{{ hostel.name }}" id="hostel_name">
        <input type="hidden" value="{{ room_type.type }}" id="room_name">
        <input type="hidden" value="{{ room_type.price }}" id="room_price">
        <input type="hidden" value="{{ room_type.id }}" id="room_type">
        <input type="hidden" value="{{ checkin }}" id="checkin">
        <input type="hidden" value="{{ checkout }}" id="checkout">
    </section>
</div>

<!-- Now Available Bar Section -->
<section class="now-available">
    <div class="alert alert-success" role="alert">
        <h4 class="alert-heading">Now Available!</h4>
        <p>Rooms are now available for booking. Don't miss out!</p>
    </div>
</section>

<!-- Booking Form -->
<section class="booking">
    <h3>Check Room Availability</h3>
    <div class="booking-dates">

        <form method="POST" action="{% url 'booking:check_room_availability' %}">
            {% csrf_token %}
            <input type="hidden" value="{{hostel.id}}" name="hostel-id" id="">
            <div class="col-lg-12 col-md-12 select_date_box">
                <div class="col-lg-12 col-md-12 select_date_box">
                    <label for="checkin">Check-in Date</label>
                    <input type="date" value="" name="checkin" id="checkin" placeholder="Select Date" required>
                </div>
                <div class="col-lg-12 col-md-12 select_date_box">
                    <label for="checkout">Check-out Date</label>
                    <input type="date" class="checkout_date" id="checkout" name="checkout" placeholder="Select Date" required>
                </div>
                
            <input type="hidden" name="hostel-id" value="{{ hostel.id }}">
            <input type="hidden" name="room-type" value="{{ room_type.slug }}">
            <div class="with-form margin-top-30">
                <div class="col-lg-12 col-md-12">
                    <label for="room-type-select">Select Room Type</label>
                    <select name="room-type" id="room-type-select" class="utf_chosen_select_single" required>
                        <option value="">Select Room Type</option>
                        <option value="premium">Premium</option>
                        <option value="normal">Normal</option>
                    </select>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Check Availability</button>
        </form>
        <button class="add-to-wishlist">Add to Wishlist</button>
    </div>
</section>


{% endblock %}
